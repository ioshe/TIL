# Servlet(4)

## 5. 서블릿 설정과 변수

### 5-1. 서블릿 동시 요청

- **웹서버 개발 방식**
    - **CGI(Common Gateway Interface)** : 웹서버의 직접적인 호출로 실행
    - **WAS(Web Application Server)** : 웹 애플리케이션 서버가 실행하는 방식
    - 서블릿은 서블릿 컨테이너라고 하는 웹애플리케이션 서버가 실행하는 방식이다.
- **CGI 프로그램**
    - 클라이언트로부터 요청이 들어올 떄마다 독립적인 프로세스`(process)`가 만들어진다.
    - 메모리에는 프로세스를 실행하기 위한 데이터가 로딩된다.
    - 서버의 3개의 요청이 있으면 각 요청을 처리하기 위해 프로세스가 3개가 만들어진다.
    - 만약 하나의 프로세스를 띄우기 위해 필요한 데이터가 5라고 가정하면 3개의 프로세스이므로 15만큼의 데이터가 메모리에 로딩된다.
- **서블릿 컨테이너**
    - 최초의 요청이면 `init()`메소드가 호출되어 프로세스를 생성한다.
    - `service()` 메소드는 최초 요청 시 만들어진 프로세스 안에 작은 프로세스를 만들고, 그 작은 프로세스 안에서 실행된다. 이와 같은 작은 프로세스를 스레드`(Thread)`라고 한다.
- 비교
    - CGI 프로그램은 요청할 때마다 독립적으로 프로세스를 만들어 실행한다.
    - 서블릿은 최초 요청 시 하나의 프로세스를 생성하고 이후에는 스레드만 생성하여 실행한다.
    - 이는 서블릿이 CGI 프로그램보다 메모리 사용성 측면에서 효율적이다.

### 5-2. 서블릿 변수

- 서블릿은 하나의 프로세스를 공유하고, 각 클라이언트 요청에 대해 별도의 스레드를 생성하여 `service()` 메소드를 실행한다.
- 서블릿의 멤버변수 : 객체 생성 시 힙 메모리에 생성된다. 서블릿을 실행하는 클라이언트들이 공통으로 사용한다.
- 서블릿의 지역변수 : `service()` 메소드가 사용한다. 이는 스택 메모리에 생성되어 클라이언트마다 독립적으로 사용한다.